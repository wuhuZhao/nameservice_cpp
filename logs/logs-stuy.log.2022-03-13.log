2022-03-13 14:30:49.856 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_BAIDU_STD success
2022-03-13 14:30:49.902 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HTTP_PROTOBUF success
2022-03-13 14:30:49.905 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_SOFA_PBRPC success
2022-03-13 14:30:49.908 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HULU_PBRPC success
2022-03-13 14:30:49.909 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_NSHEAD_JSON success
2022-03-13 14:30:49.909 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_NSHEAD_PROTOBUF success
2022-03-13 14:30:49.910 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_STARGATE success
2022-03-13 14:30:49.911 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_SERVER_PUSH success
2022-03-13 14:30:49.911 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_DUBBO success
2022-03-13 14:30:49.911 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HTTP_JSON success
2022-03-13 14:30:49.916 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-1
2022-03-13 14:30:49.916 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-2
2022-03-13 14:30:49.916 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-3
2022-03-13 14:30:49.917 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-4
2022-03-13 14:30:49.944 [main] INFO  com.baidu.brpc.server.CommunicationServer - use jdk nio event mode
2022-03-13 14:30:49.963 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:RandomLoadBalanceFactory success
2022-03-13 14:30:49.963 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:RoundRobinLoadBalanceFactory success
2022-03-13 14:30:49.964 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:WeightLoadBalanceFactory success
2022-03-13 14:30:49.964 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:FairLoadBalanceFactory success
2022-03-13 14:30:50.605 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=findHostList
2022-03-13 14:30:50.607 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=findNameService
2022-03-13 14:30:50.608 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=insertOneNameService
2022-03-13 14:30:50.610 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=insertAnyNameService
2022-03-13 14:30:50.638 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-acceptor-thread-1
2022-03-13 14:30:50.641 [main] INFO  com.baidu.brpc.server.CommunicationServer - server started on port=8002 success
2022-03-13 14:30:50.641 [main] INFO  BrpcServiceMain - brpc server start port: 8002
2022-03-13 14:31:25.633 [server-acceptor-thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-1
2022-03-13 14:31:26.139 [server-work-thread-1] WARN  com.baidu.brpc.interceptor.ServerInvokeInterceptor - invoke method failed, msg=
### Error updating database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nameService.nameservice_store' doesn't exist
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into nameservice_store(service_name,host, weight, healthy)             values                                (?, ?, ?, ?)              ,                  (?, ?, ?, ?)
### Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nameService.nameservice_store' doesn't exist
org.apache.ibatis.exceptions.PersistenceException: 
### Error updating database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nameService.nameservice_store' doesn't exist
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into nameservice_store(service_name,host, weight, healthy)             values                                (?, ?, ?, ?)              ,                  (?, ?, ?, ?)
### Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nameService.nameservice_store' doesn't exist
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:200)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:185)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:56)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:53)
	at com.sun.proxy.$Proxy0.insertBatch(Unknown Source)
	at service.impl.NameServiceStoreImpl.insertAnyLine(NameServiceStoreImpl.java:73)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.baidu.brpc.interceptor.ServerInvokeInterceptor.aroundProcess(ServerInvokeInterceptor.java:32)
	at com.baidu.brpc.interceptor.DefaultInterceptorChain.intercept(DefaultInterceptorChain.java:41)
	at com.baidu.brpc.interceptor.AbstractInterceptor.aroundProcess(AbstractInterceptor.java:36)
	at com.baidu.brpc.interceptor.ServerTraceInterceptor.aroundProcess(ServerTraceInterceptor.java:41)
	at com.baidu.brpc.interceptor.DefaultInterceptorChain.intercept(DefaultInterceptorChain.java:41)
	at com.baidu.brpc.server.InterceptCommunicationServer.execute(InterceptCommunicationServer.java:51)
	at com.baidu.brpc.server.handler.ServerWorkTask.run(ServerWorkTask.java:70)
	at com.baidu.brpc.server.handler.DecodeWorkTask.run(DecodeWorkTask.java:136)
	at com.baidu.brpc.utils.ThreadPool.consume(ThreadPool.java:131)
	at com.baidu.brpc.utils.ThreadPool.access$000(ThreadPool.java:37)
	at com.baidu.brpc.utils.ThreadPool$1.run(ThreadPool.java:79)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'nameService.nameservice_store' doesn't exist
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
	at com.mysql.jdbc.Util.getInstance(Util.java:381)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1030)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
	at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:995)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
	... 22 common frames omitted
2022-03-13 14:33:08.978 [Thread-0] INFO  com.baidu.brpc.thread.ShutDownManager - Brpc do clean work...
2022-03-13 14:33:08.979 [Thread-0] INFO  com.baidu.brpc.thread.ShutDownManager - invoke shutdownGlobalThreadPools
2022-03-13 14:33:08.982 [Thread-0] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:timeout-timer-thread-1
2022-03-13 14:33:10.983 [Thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-2
2022-03-13 14:33:10.983 [Thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-3
2022-03-13 14:33:10.984 [Thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-4
2022-03-13 14:34:44.215 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_BAIDU_STD success
2022-03-13 14:34:44.261 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HTTP_PROTOBUF success
2022-03-13 14:34:44.263 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_SOFA_PBRPC success
2022-03-13 14:34:44.266 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HULU_PBRPC success
2022-03-13 14:34:44.267 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_NSHEAD_JSON success
2022-03-13 14:34:44.268 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_NSHEAD_PROTOBUF success
2022-03-13 14:34:44.268 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_STARGATE success
2022-03-13 14:34:44.269 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_SERVER_PUSH success
2022-03-13 14:34:44.270 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_DUBBO success
2022-03-13 14:34:44.270 [main] INFO  com.baidu.brpc.protocol.ProtocolManager - register protocol:PROTOCOL_HTTP_JSON success
2022-03-13 14:34:44.274 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-1
2022-03-13 14:34:44.275 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-2
2022-03-13 14:34:44.275 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-3
2022-03-13 14:34:44.275 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-work-thread-4
2022-03-13 14:34:44.304 [main] INFO  com.baidu.brpc.server.CommunicationServer - use jdk nio event mode
2022-03-13 14:34:44.323 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:RandomLoadBalanceFactory success
2022-03-13 14:34:44.323 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:RoundRobinLoadBalanceFactory success
2022-03-13 14:34:44.323 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:WeightLoadBalanceFactory success
2022-03-13 14:34:44.324 [main] INFO  com.baidu.brpc.loadbalance.LoadBalanceManager - register load balance factory:FairLoadBalanceFactory success
2022-03-13 14:34:44.985 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=findHostList
2022-03-13 14:34:44.986 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=findNameService
2022-03-13 14:34:44.989 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=insertOneNameService
2022-03-13 14:34:44.991 [main] INFO  com.baidu.brpc.server.ServiceManager - register service, serviceName=nameService.nameServiceStore, methodName=insertAnyNameService
2022-03-13 14:34:45.019 [main] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-acceptor-thread-1
2022-03-13 14:34:45.021 [main] INFO  com.baidu.brpc.server.CommunicationServer - server started on port=8002 success
2022-03-13 14:34:45.022 [main] INFO  BrpcServiceMain - brpc server start port: 8002
2022-03-13 14:34:50.376 [server-acceptor-thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-1
2022-03-13 14:34:50.903 [server-work-thread-1] INFO  service.impl.NameServiceStoreImpl - traceId: 1647153290901, request: service_name: "haokai22"
tuples {
  host: "1.1.1.1"
  weight: 100
  healthy: true
}
tuples {
  host: "2.2.2.2"
  weight: 100
  healthy: true
}
, response: response {
  code: 200
  msg: "success"
  traceId: "1647153290901"
}

2022-03-13 14:38:07.894 [server-acceptor-thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-2
2022-03-13 14:38:07.960 [server-work-thread-2] INFO  service.impl.NameServiceStoreImpl - traceId: 1647153487960, request: service_name: "haokai22sdsr"
tuples {
  host: "1.3.1.1"
  weight: 100
  healthy: true
}
tuples {
  host: "2.2.2.1"
  weight: 100
  healthy: true
}
, response: response {
  code: 200
  msg: "success"
  traceId: "1647153487960"
}

2022-03-13 14:38:35.482 [server-acceptor-thread-1] INFO  com.baidu.brpc.utils.CustomThreadFactory - create thread:server-io-thread-3
2022-03-13 14:38:35.550 [server-work-thread-3] INFO  service.impl.NameServiceStoreImpl - traceId: 1647153515550, request: service_name: "haokai22sdsr3423424"
tuples {
  host: "1.3.1.1:1000"
  weight: 100
  healthy: true
}
tuples {
  host: "2.2.2.1:2000"
  weight: 100
  healthy: true
}
, response: response {
  code: 200
  msg: "success"
  traceId: "1647153515550"
}

